<% provide(:title, 'All Doctors') %>
<h1>All doctors</h1>

<ul class="doctors">
  <%# @doctors.each do |doctor| %>
  <%#= render doctor %>
  <%#= render @doctors %>
  <%# end %>
</ul>
<% if current_user.admin? %>
<a class="add-doctor btn btn-primary" href="/doctors/new"><%#= link_to "Doctors", doctors_path %>Add Doctor</a>
<% else %>
        <% end %>
<%= will_paginate %>

<div class="table-responsive">
      <table class="table">
        <thead>
          <tr>
            <th>Name</th>
            <th>Email</th>
            <th>Phone Number</th>
            <th>Assigned Patients</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          <% @doctors.each do |doctor| %>
            <tr>
              <td><%= link_to doctor.name, doctor %></td>
              <td><%= doctor.email %></td>
              <td><%= doctor.phone %></td>
              <td>
                <% doctor.patients.each do |patient| %>
                  <%= link_to patient.name, patient %>
                  <br/>
                <% end %>
              </td>
              <td>
                <% if current_user.admin? %>
                <%= link_to "Edit", edit_doctor_path(doctor) , class: 'btn btn-primary btn-sm' %>
                <% else %>
                <% end %>
                <%= link_to "View", doctor_path(doctor) , class: 'btn btn-success btn-sm' %>
                <% if current_user.admin? %>
                <%= link_to "Delete", doctor_path(doctor), title: 'Delete', class: 'fa fa-trash-alt btn btn-danger btn-sm', method: :delete, data: { confirm: "Are you sure you want to delete this doctor #{doctor.name}?" } %>
                <% else %>
                <% end %>
              </td>
            </tr>
          <% end %>
        </tbody>
      </table>
    </div>
    <%= will_paginate %>
